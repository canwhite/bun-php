# Task: è§£å†³src/app/componentså’Œsrc/app/islandsä¸­çš„ç±»å‹é—®é¢˜

**ä»»åŠ¡ID**: task_types_260124_111029
**åˆ›å»ºæ—¶é—´**: 2026-01-24
**çŠ¶æ€**: å·²å®Œæˆ
**å®Œæˆæ—¶é—´**: 2026-01-24
**ç›®æ ‡**: ä¿®å¤TypeScriptç±»å‹å¯¼å…¥é”™è¯¯ï¼Œç¡®ä¿é¡¹ç›®é€šè¿‡ç±»å‹æ£€æŸ¥

## ä»»åŠ¡æ€»ç»“

### âœ… å·²è§£å†³çš„é—®é¢˜

1. **`verbatimModuleSyntax` ç±»å‹å¯¼å…¥é”™è¯¯** - å·²ä¿®å¤4ä¸ªæ–‡ä»¶ï¼š
   - `src/app/components/Island.tsx`: JSXå’ŒIslandNameç±»å‹å¯¼å…¥
   - `src/app/islands/forms/Button.tsx`: JSXç±»å‹å¯¼å…¥
   - `src/app/islands/ui/Button.tsx`: JSXç±»å‹å¯¼å…¥

2. **ç±»å‹å®‰å…¨æ€§ä¼˜åŒ–**ï¼š
   - ç§»é™¤æœªä½¿ç”¨çš„ `islands` å¯¼å…¥
   - å°† `Record<string, any>` æ”¹ä¸º `Record<string, unknown>`
   - ä¿æŒæ¸…æ™°çš„ç±»å‹å¯¼å…¥è¯­æ³•

3. **éªŒè¯ç»“æœ**ï¼š
   - âœ… TypeScriptç¼–è¯‘é€šè¿‡ (`bun tsc --noEmit`)
   - âœ… æ ¸å¿ƒç±»å‹é”™è¯¯å·²æ¶ˆé™¤
   - âœ… é¡¹ç›®ç±»å‹å®‰å…¨æ€§æå‡

### ğŸ” å‘ç°ä½†ä¸å¤„ç†çš„é—®é¢˜

1. **æ¥å£å‘½åé‡å¤**ï¼š`forms/Button.tsx` å’Œ `ui/Button.tsx` éƒ½å¯¼å‡º `ButtonProps` æ¥å£
   - è¯„ä¼°ï¼šæ¥å£å®šä¹‰ä¸åŒï¼ŒTypeScriptä¼šæ•è·ç±»å‹ä¸åŒ¹é…
   - æ–‡ä»¶ä½äºä¸åŒç›®å½•ï¼Œæœªå‘ç°å¯¼å…¥å†²çª
   - å†³å®šï¼šä¿æŒç°çŠ¶ï¼Œæœªæ¥å¯æ ¹æ®éœ€è¦é‡å‘½å

2. **å‰©ä½™lintè­¦å‘Š**ï¼ˆä¸ç»„ä»¶ç±»å‹æ— å…³ï¼‰ï¼š
   - `generate-islands.ts`: æœªä½¿ç”¨çš„ `basename` å˜é‡
   - `src/lib/router/index.ts`: æœªä½¿ç”¨çš„ `routeParams` å˜é‡

### ğŸ“ ä¿®å¤è¯¦æƒ…

```typescript
// ä¿®å¤å‰ï¼š
import { JSX } from 'preact';
import { islands, IslandName } from '../../islands.generated';
props?: Record<string, any>;

// ä¿®å¤åï¼š
import type { JSX } from 'preact';
import type { IslandName } from '../../islands.generated';
props?: Record<string, unknown>;
```

### ğŸ¯ ä»»åŠ¡å®Œæˆæ ‡å‡†

- [x] TypeScriptç¼–è¯‘æ— é”™è¯¯
- [x] `src/app/components/` å’Œ `src/app/islands/` ç±»å‹é—®é¢˜è§£å†³
- [x] ç±»å‹å¯¼å…¥ç¬¦åˆ `verbatimModuleSyntax` è¦æ±‚
- [x] ç±»å‹å®‰å…¨æ€§æå‡ï¼ˆæ—  `any` ç±»å‹ï¼‰

## æœ€ç»ˆç›®æ ‡

1. ä¿®å¤ `verbatimModuleSyntax` å¯¼è‡´çš„ç±»å‹å¯¼å…¥é”™è¯¯
2. ç¡®ä¿ `src/app/components/` å’Œ `src/app/islands/` ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶é€šè¿‡TypeScriptç±»å‹æ£€æŸ¥
3. è§£å†³æ½œåœ¨çš„ç»„ä»¶æ¥å£å‘½åå†²çª
4. ä¿æŒé¡¹ç›®ç±»å‹å®‰å…¨æ€§å’Œä¸€è‡´æ€§

## æ‹†è§£æ­¥éª¤

### 1. åˆ†æå…·ä½“ç±»å‹é—®é¢˜

- [x] 1.1 æŸ¥çœ‹ `tsconfig.json` é…ç½®ï¼Œç¡®è®¤ `verbatimModuleSyntax` è®¾ç½®
- [x] 1.2 æ£€æŸ¥æ‰€æœ‰æŠ¥é”™æ–‡ä»¶çš„å…·ä½“é”™è¯¯ä¿¡æ¯
- [x] 1.3 åˆ†æç»„ä»¶é—´æ½œåœ¨çš„æ¥å£å‘½åå†²çª

### 2. ä¿®å¤ç±»å‹å¯¼å…¥é”™è¯¯

- [x] 2.1 ä¿®å¤ `src/app/components/Island.tsx` ä¸­çš„ç±»å‹å¯¼å…¥
  - [x] ä¿®å¤ `JSX` ç±»å‹å¯¼å…¥
  - [x] ä¿®å¤ `IslandName` ç±»å‹å¯¼å…¥
- [x] 2.2 ä¿®å¤ `src/app/islands/forms/Button.tsx` ä¸­çš„ç±»å‹å¯¼å…¥
  - [x] ä¿®å¤ `JSX` ç±»å‹å¯¼å…¥
- [x] 2.3 ä¿®å¤ `src/app/islands/ui/Button.tsx` ä¸­çš„ç±»å‹å¯¼å…¥
  - [x] ä¿®å¤ `JSX` ç±»å‹å¯¼å…¥

### 3. éªŒè¯ä¿®å¤ç»“æœ

- [x] 3.1 è¿è¡ŒTypeScriptç±»å‹æ£€æŸ¥å‘½ä»¤
- [x] 3.2 ç¡®è®¤æ‰€æœ‰é”™è¯¯å·²ä¿®å¤
- [x] 3.3 æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–æ½œåœ¨ç±»å‹é—®é¢˜

### 4. ä¼˜åŒ–ç±»å‹å®‰å…¨æ€§ï¼ˆå®Œæˆï¼‰

- [x] 4.1 ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥ (`islands`)
- [x] 4.2 ä¿®å¤ `any` ç±»å‹ä¸º `unknown` (`Record<string, unknown>`)
- [x] 4.3 è¯„ä¼°æ¥å£å‘½åå†²çªï¼ˆå†³å®šæš‚ä¸é‡å‘½åï¼‰
  - `forms/Button.tsx` å’Œ `ui/Button.tsx` éƒ½å¯¼å‡º `ButtonProps` æ¥å£
  - æ¥å£å®šä¹‰ä¸åŒï¼ŒTypeScriptä¼šåœ¨ç±»å‹ä¸åŒ¹é…æ—¶æ•è·é”™è¯¯
  - æ–‡ä»¶ä½äºä¸åŒç›®å½•ï¼Œæ²¡æœ‰å‘ç°ç›´æ¥å¯¼å…¥å†²çª
  - ä¿æŒç°çŠ¶ï¼Œæœªæ¥å¦‚æœ‰éœ€è¦å¯é‡å‘½åä¸º `UIButtonProps` å’Œ `FormButtonProps`
- [x] 4.4 ç±»å‹æ³¨é‡Šå’Œæ–‡æ¡£å·²å­˜åœ¨
- [x] 4.5 ç”Ÿæˆçš„æ–‡ä»¶ç±»å‹æ­£ç¡®

## å½“å‰è¿›åº¦

### æ­£åœ¨è¿›è¡Œ: ä¼˜åŒ–ç±»å‹å®‰å…¨æ€§

å·²å®Œæˆçš„ä¸»è¦ä¿®å¤ï¼š

1. **`src/app/components/Island.tsx`**ï¼š
   - âœ… ä¿®å¤JSXç±»å‹å¯¼å…¥ï¼š`import type { JSX } from 'preact'`
   - âœ… ä¿®å¤IslandNameç±»å‹å¯¼å…¥ï¼š`import type { IslandName } from '../../islands.generated'`
   - âœ… ç§»é™¤æœªä½¿ç”¨çš„ `islands` å¯¼å…¥
   - âœ… ä¿®å¤ `any` ç±»å‹ä¸º `unknown`ï¼š`Record<string, unknown>`

2. **`src/app/islands/forms/Button.tsx`**ï¼š
   - âœ… ä¿®å¤JSXç±»å‹å¯¼å…¥ï¼š`import type { JSX } from 'preact'`ï¼ˆå·²ç”±linterç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥ï¼‰

3. **`src/app/islands/ui/Button.tsx`**ï¼š
   - âœ… ä¿®å¤JSXç±»å‹å¯¼å…¥ï¼š`import type { JSX } from 'preact'`

**ç±»å‹æ£€æŸ¥ç»“æœ**ï¼šâœ… TypeScriptç¼–è¯‘é€šè¿‡ï¼Œæ— é”™è¯¯

**å‰©ä½™lintè­¦å‘Š**ï¼š
- `generate-islands.ts`: æœªä½¿ç”¨çš„ `basename` å˜é‡ï¼ˆä¸ç»„ä»¶ç±»å‹æ— å…³ï¼‰
- `src/lib/router/index.ts`: æœªä½¿ç”¨çš„ `routeParams` å˜é‡ï¼ˆä¸ç»„ä»¶ç±»å‹æ— å…³ï¼‰
- `Island.tsx` ä¸­çš„ `any` ç±»å‹å·²ä¿®å¤ä¸º `unknown`

**æ¥å£å‘½åå†²çª**ï¼š
- `forms/Button.tsx` å’Œ `ui/Button.tsx` éƒ½å¯¼å‡ºäº† `ButtonProps` æ¥å£
- éœ€è¦æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–æ–‡ä»¶å¯¼å…¥è¿™äº›æ¥å£ï¼Œå†³å®šæ˜¯å¦é‡å‘½å

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. è¿è¡ŒTypeScriptç±»å‹æ£€æŸ¥å‘½ä»¤éªŒè¯ä¿®å¤
2. ç¡®è®¤æ‰€æœ‰é”™è¯¯å·²æ¶ˆé™¤
3. æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–æ½œåœ¨ç±»å‹é—®é¢˜