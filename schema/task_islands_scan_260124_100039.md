# Task: 改进islands设计，支持文件扫描和组件分类

**任务ID**: task_islands_scan_260124_100039
**创建时间**: 2026-01-24
**状态**: 进行中
**目标**: 改进当前粗糙的islands设计，支持文件扫描和组件分类，提高挂载便利性

## 最终目标

1. 分析当前islands设计的不足之处
2. 设计支持文件扫描的islands架构
3. 实现组件分类机制，方便管理和挂载
4. 改进挂载方式，提高开发便利性
5. 确保向后兼容性

## 拆解步骤

### 1. 分析当前islands设计

- [ ] 1.1 阅读现有islands目录结构和代码
- [ ] 1.2 了解generate-islands.ts脚本的工作原理
- [ ] 1.3 分析当前挂载方式的局限性
- [ ] 1.4 总结需要改进的关键点

### 2. 设计改进方案

- [ ] 2.1 设计文件扫描机制
- [ ] 2.2 设计组件分类方案
- [ ] 2.3 设计新的挂载API
- [ ] 2.4 确保类型安全和开发体验

### 3. 实现文件扫描功能

- [ ] 3.1 修改生成脚本支持目录扫描
- [ ] 3.2 实现组件分类逻辑
- [ ] 3.3 更新islands.generated.ts格式

### 4. 实现新的挂载机制

- [ ] 4.1 改进客户端hydration逻辑
- [ ] 4.2 提供更便利的挂载API
- [ ] 4.3 确保向后兼容性

### 5. 测试和验证

- [ ] 5.1 创建测试组件验证新设计
- [ ] 5.2 测试分类和挂载功能
- [ ] 5.3 验证类型安全
- [ ] 5.4 更新文档

## 当前进度

### 正在进行: 步骤1 - 分析当前islands设计

正在阅读现有islands目录结构和代码，了解当前设计的局限性。

## 下一步行动

1. 查看src/islands目录结构
2. 阅读generate-islands.ts脚本
3. 分析当前挂载方式
4. 总结改进点